# üì± Event Planner - Scan Validation Service Environment Configuration

# ===========================================
# üöÄ SERVEUR & ENVIRONNEMENT
# ===========================================
PORT=3005
NODE_ENV=development

# ===========================================
# üóÑÔ∏è BASE DE DONN√âES POSTGRESQL
# ===========================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=event_planner_scan
DB_USER=postgres
DB_PASSWORD=postgres
DB_SSL=false

# Pool de connexions
DB_POOL_MAX=20
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=2000

# Bootstrap automatique de la base de donn√©es
DB_AUTO_BOOTSTRAP=false

# ===========================================
# üîê QR CODE VALIDATION
# ===========================================
# Cl√©s pour validation cryptographique des QR codes
QR_HMAC_SECRET=your_super_secure_qr_hmac_secret_change_in_production
QR_RSA_PUBLIC_KEY=-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA...
-----END PUBLIC KEY-----
QR_RSA_PRIVATE_KEY=-----BEGIN PRIVATE KEY-----
MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQC...
-----END PRIVATE KEY-----

# Configuration QR code
QR_MAX_VALIDITY=86400
QR_MAX_SIZE=4096
QR_ALGORITHM=HS256

# ===========================================
# üåê COMMUNICATION AVEC EVENT PLANNER CORE
# ===========================================
CORE_SERVICE_URL=http://localhost:3001
CORE_SERVICE_TIMEOUT=10000
CORE_SERVICE_RETRIES=2

# Circuit Breaker Configuration
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=60000
CIRCUIT_BREAKER_RESET_TIMEOUT=30000

# ===========================================
# üì± SCAN CONFIGURATION
# ===========================================
QR_SCAN_TIMEOUT=5000
MAX_SCAN_ATTEMPTS=3
SCAN_RETRY_DELAY=1000
SCAN_VALIDATION_CACHE_TTL=300

# Gestion des scans concurrents
MAX_CONCURRENT_SCANS=100
SCAN_TIMEOUT=15000
MAX_SCANS_PER_TICKET=5

# ===========================================
# üõ°Ô∏è FRAUD DETECTION
# ===========================================
FRAUD_DETECTION_ENABLED=true
BLOCK_ON_FRAUD=true

# Seuils de d√©tection de fraude
FRAUD_THRESHOLD_CONCURRENT_SCANS=3
FRAUD_THRESHOLD_FAILED_SCANS=10
FRAUD_TIME_WINDOW=300000

# ===========================================
# üì± OFFLINE MODE
# ===========================================
OFFLINE_MODE=true
OFFLINE_DB_PATH=./offline.db
SYNC_INTERVAL=30000
OFFLINE_SYNC_BATCH_SIZE=100

# Cache offline
OFFLINE_CACHE_TTL=86400000
OFFLINE_BACKUP_INTERVAL=3600000

# ===========================================
# üìù LOGGING
# ===========================================
LOG_LEVEL=info
LOG_FILE_PATH=logs
LOG_MAX_SIZE=20MB
LOG_MAX_FILES=14d

# Logs structur√©s
LOG_FORMAT=json
LOG_DATE_FORMAT=YYYY-MM-DD HH:mm:ss

# ===========================================
# üö¶ RATE LIMITING
# ===========================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000
SCAN_RATE_LIMIT_PER_MINUTE=200

# ===========================================
# üåê CORS & S√âCURIT√â DE BASE
# ===========================================
CORS_ORIGIN=*
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# S√©curit√© de base (sans authentification)
HELMET_ENABLED=true
COMPRESSION_ENABLED=true

# ===========================================
# üìä MONITORING
# ===========================================
ENABLE_METRICS=true
METRICS_PORT=9095

# Health checks
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# ===========================================
# ‚ö° PERFORMANCE
# ===========================================
# Validation concurrency
VALIDATION_CONCURRENCY=10
OFFLINE_SYNC_CONCURRENCY=5

# Cache configuration
CACHE_TTL=300000
CACHE_MAX_SIZE=1000

# ===========================================
# üîÑ SYNCHRONISATION
# ===========================================
SYNC_RETRY_ATTEMPTS=3
SYNC_RETRY_DELAY=5000
SYNC_COMPRESSION_ENABLED=true

# ===========================================
# üìà STATISTIQUES
# ===========================================
STATS_AGGREGATION_INTERVAL=60000
STATS_RETENTION_PERIOD=2592000000
STATS_REAL_TIME_UPDATES=true

# ===========================================
# üóÇÔ∏è NETTOYAGE AUTOMATIQUE
# ===========================================
CLEANUP_ENABLED=true
CLEANUP_INTERVAL=86400000
CLEANUP_RETENTION_DAYS=90

# ===========================================
# üîß D√âVELOPPEMENT
# ===========================================
# Mode d√©veloppement
DEBUG_MODE=false
VERBOSE_LOGGING=false

# Tests
TEST_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/event_planner_scan_test
TEST_TIMEOUT=10000
